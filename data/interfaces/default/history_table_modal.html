% if data:
<div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-remove"></i></button>
            <h4 class="modal-title" id="myModalLabel">
                <strong><span id="modal_header_ip_address">
                    <i class="fa fa-history"></i> History for <span id="date-header">${data['start_date']}</span>
                </span></strong>
            </h4>
        </div>
        <div class="modal-body" id="modal-text">
            <table class="display history_table" id="history_table_modal" width="100%">
                <thead>
                <tr>
                    <th align="left" id="started">Started</th>
                    <th align="left" id="stopped">Stopped</th>
                    <th align="left" id="friendly_name">User</th>
                    <th align="left" id="player">Player</th>
                    <th align="left" id="title">Title</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div class="modal-footer"></div>
    </div>
</div>

<script src="${http_root}js/tables/history_table_modal.js${cache_param}"></script>
<script>
    $(document).ready(function() {
        $('#date-header').html(moment('${data["start_date"]}','YYYY-MM-DD').format('ddd MMM Do YYYY'));
        history_table_modal_options.ajax = {
            url: 'get_history',
            type: 'post',
            data: function ( d ) {
                return {
                    json_data: JSON.stringify(d),
                    grouping: false,
                    user_id: "${data['user_id']}",
                    start_date: "${data['start_date']}",
                    media_type: "${data.get('media_type')}",
                    transcode_decision: "${data.get('transcode_decision')}"
                };
            }
        }

        history_table = $('#history_table_modal').DataTable(history_table_modal_options);
        
        clearSearchButton('history_table_modal', history_table);
    });
</script>
% else:
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-remove"></i></button>
            <h4 class="modal-title">
                <strong><i class="fa fa-history"></i> History</strong>
            </h4>
        </div>
        <div class="modal-body">
            <h3>No data.</h3>
        </div>
        <div class="modal-footer"></div>
    </div>
</div>
% endif
