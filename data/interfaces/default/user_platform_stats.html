<%doc>
USAGE DOCUMENTATION :: PLEASE LEAVE THIS AT THE TOP OF THIS FILE

For Mako templating syntax documentation please visit: http://docs.makotemplates.org/en/latest/

Filename:           user_platform_stats.html
Version:            0.1
Variable names:     data [array]

data[array_index] :: Usable parameters

== Global keys ==
result_id               Returns a unique identifier for the result.
platform_name           Returns the name of the platform.
total_plays             Returns the play count for the platform.

DOCUMENTATION :: END
</%doc>

% if data != None:
% for a in data:
<ul class="list-unstyled">
    <div class="user-platforms-instance">
        <li>
            <span id="user-platform-image-${a['result_id']}"></span>
            <div class="user-platforms-instance-name">
                ${a['platform_name']}
            </div>
            <div class="user-platforms-instance-playcount">
                <h3>${a['total_plays']}</h3>
                <p> plays</p>
            </div>
        </li>
    </div>
</ul>
<script>
    $("#user-platform-image-${a['result_id']}").html("<div class='user-platforms-instance-poster' style='background-image: url(" + getPlatformImagePath('${a['platform_type']}') + ");'>");
</script>
% endfor
<script>
    $(function () {
        if (HCTest() == true) {
            $('.user-platforms-instance-poster').each(function () {
                background_img = $(this).attr('style').split('(')[1].split(')')[0];
                $(this).html('<img src="' + background_img + '" width="80" height="80"/>');
            })
        }
    })
</script>
% else:
<div class="text-muted">Unable to retrieve data from database. Please check your <a href="settings">settings</a>.
</div><br>
% endif