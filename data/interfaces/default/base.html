<%
import plexpy
from plexpy import version
%>
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PlexPy - ${title} | ${server_name}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="interfaces/default/css/bootstrap3/bootstrap.css" rel="stylesheet">
    <link href="interfaces/default/css/plexpy.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link href="interfaces/default/css/font-awesome.min.css" rel="stylesheet">
    ${next.headIncludes()}

    <link rel="icon" type="image/x-icon" href="interfaces/default/images/favicon.ico"/>
    <link rel="shortcut icon" href="interfaces/default/images/favicon.png">

    <!-- Allow web app to be run in full-screen mode. -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Configure the status bar. -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- Set the viewport. -->
    <meta name="viewport" content="initial-scale=1">
    <!-- Disable automatic phone number detection. -->
    <meta name="format-detection" content="telephone=no">

    <!-- ICONS -->
    <!-- IE10 icon --> 
    <meta name="application-name" content="PlexPy" />
    <meta name="msapplication-config" content="interfaces/default/xml/IEconfig.xml"/>
    <!-- Android >M39 icon -->
    <link rel="manifest" href="interfaces/default/json/Android-manifest.json">
    <!-- iPad retina icon -->
    <link href="interfaces/default/images/res/ios/icon-76@2x.png" sizes="152x152" rel="apple-touch-icon-precomposed">
    <!-- iPad retina icon (iOS < 7) -->
    <link href="interfaces/default/images/res/ios/icon-72@2x.png" sizes="144x144" rel="apple-touch-icon-precomposed">
    <!-- iPad non-retina icon -->
    <link href="interfaces/default/images/res/ios/icon-76.png" sizes="76x76" rel="apple-touch-icon-precomposed">
    <!-- iPad non-retina icon (iOS < 7) -->
    <link href="interfaces/default/images/res/ios/icon-72.png" sizes="72x72" rel="apple-touch-icon-precomposed">
    <!-- iPhone 6 Plus icon -->
    <link href="interfaces/default/images/res/ios/icon-60@2x.png" sizes="120x120" rel="apple-touch-icon-precomposed">
    <!-- iPhone retina icon (iOS < 7) -->
    <link href="interfaces/default/images/res/ios/icon@2x.png" sizes="114x114" rel="apple-touch-icon-precomposed">
    <!-- iPhone non-retina icon (iOS < 7) -->
    <link href="interfaces/default/images/res/ios/icon.png" sizes="57x57" rel="apple-touch-icon-precomposed">
    <!-- iPhone / iPod Touch  -->
    <link href="interfaces/default/images/res/ios/icon-60@3x.png" sizes="180x180" rel="apple-touch-icon-precomposed">
    <link href="interfaces/default/images/res/ios/icon-60.png" sizes="60x60" rel="apple-touch-icon-precomposed">
    <!-- Spotlight Icon -->
    <link href="interfaces/default/images/res/ios/icon-40.png" sizes="40x40" rel="apple-touch-icon-precomposed">
    <link href="interfaces/default/images/res/ios/icon-40@2x.png" sizes="80x80" rel="apple-touch-icon-precomposed">
    <!-- iPhone Spotlight and Settings Icon -->
    <link href="interfaces/default/images/res/ios/icon-small.png" sizes="29x29" rel="apple-touch-icon-precomposed">
    <link href="interfaces/default/images/res/ios/icon-small@2x.png" sizes="58x58" rel="apple-touch-icon-precomposed">
    <!-- iPad Spotlight and Settings Icon -->
    <link href="interfaces/default/images/res/ios/icon-50.png" sizes="50x50" rel="apple-touch-icon-precomposed">
    <link href="interfaces/default/images/res/ios/icon-50@2x.png" sizes="100x100" rel="apple-touch-icon-precomposed">
            
    <!-- STARTUP IMAGES -->
    <!-- iPad retina portrait startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-Portrait@2x~ipad.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (-webkit-device-pixel-ratio: 2)
                 and (orientation: portrait)"
          rel="apple-touch-startup-image">

    <!-- iPad retina landscape startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-Landscape@2x~ipad.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (-webkit-device-pixel-ratio: 2)
                 and (orientation: landscape)"
          rel="apple-touch-startup-image">

    <!-- iPad non-retina portrait startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-Portrait~ipad.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (-webkit-device-pixel-ratio: 1)
                 and (orientation: portrait)"
          rel="apple-touch-startup-image">

    <!-- iPad non-retina landscape startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-Landscape~ipad.png"
          media="(device-width: 768px) and (device-height: 1024px)
                 and (-webkit-device-pixel-ratio: 1)
                 and (orientation: landscape)"
          rel="apple-touch-startup-image">

    <!-- iPhone 6 Plus portrait startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-736h.png"
          media="(device-width: 414px) and (device-height: 736px)
                 and (-webkit-device-pixel-ratio: 3)
                 and (orientation: portrait)"
          rel="apple-touch-startup-image">

    <!-- iPhone 6 Plus landscape startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-Landscape-736h.png"
          media="(device-width: 414px) and (device-height: 736px)
                 and (-webkit-device-pixel-ratio: 3)
                 and (orientation: landscape)"
          rel="apple-touch-startup-image">

    <!-- iPhone 6 startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-667h.png"
          media="(device-width: 375px) and (device-height: 667px)
                 and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">

    <!-- iPhone 5 startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default-568h@2x~iphone5.jpg"
          media="(device-width: 320px) and (device-height: 568px)
                 and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">

    <!-- iPhone < 5 retina startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default@2x~iphone.png"
          media="(device-width: 320px) and (device-height: 480px)
                 and (-webkit-device-pixel-ratio: 2)"
          rel="apple-touch-startup-image">

    <!-- iPhone < 5 non-retina startup image -->
    <link href="interfaces/default/images/res/screen/ios/Default~iphone.png"
          media="(device-width: 320px) and (device-height: 480px)
                 and (-webkit-device-pixel-ratio: 1)"
          rel="apple-touch-startup-image">

</head>

<body class="content">
<div class="container">
    <div id="ajaxMsg" class="ajaxMsg"></div>
    % if plexpy.CONFIG.CHECK_GITHUB and not plexpy.CURRENT_VERSION:
    <div id="updatebar" style="display: none;">
        You're running an unknown version of PlexPy. <a href="update">Update</a> or
        <a href="#" id="updateDismiss">Close</a>
    </div>
    % elif plexpy.CONFIG.CHECK_GITHUB and plexpy.CURRENT_VERSION != plexpy.LATEST_VERSION and plexpy.COMMITS_BEHIND > 0 and plexpy.INSTALL_TYPE != 'win':
    <div id="updatebar" style="display: none;">
        A <a
            href="https://github.com/${plexpy.CONFIG.GIT_USER}/plexpy/compare/${plexpy.CURRENT_VERSION}...${plexpy.LATEST_VERSION}" target="_blank">
        newer version</a> is available. You're ${plexpy.COMMITS_BEHIND} commits behind. <a href="update">Update</a> or
        <a href="#" id="updateDismiss">Close</a>
    </div>
    % endif
    <nav class="navbar navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="home">
                    <img alt="PlexPy" src="interfaces/default/images/logo-plexpy@2x.png" height="40">
                </a>
            </div>
            <div class="collapse navbar-collapse navbar-right" id="navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li class="hidden-sm hidden-xs">
                        <form action="search" method="post" class="form" id="search_form">
                            <div class="input-group">
                                <span class="input-textbox">
                                    <input type="text" class="form-control" name="query" id="query" aria-label="Search" placeholder="Search..."/>
                                </span>
                                <span class="input-group-btn">
                                    <button class="btn btn-dark btn-inactive" type="submit" id="search_button"><i class="fa fa-search"></i></button>
                                </span>
                            </div>
                        </form>
                    </li>
                    % if title == "Home":
                        <li class="active"><a href="home"><i class="fa fa-lg fa-home"></i></a></li>
                    % else:
                        <li><a href="home"><i class="fa fa-lg fa-home"></i></a></li>
                    % endif
                    % if title == "Libraries" or title == "Library" or title == "Info":
                    <li class="active"><a href="libraries">Libraries</a></li>
                    % else:
                    <li><a href="libraries">Libraries</a></li>
                    % endif
                    % if title == "Users" or title == "User":
                        <li class="active"><a href="users">Users</a></li>
                    % else:
                        <li><a href="users">Users</a></li>
                    % endif
                    % if title == "History":
                    <li class="active"><a href="history">History</a></li>
                    % else:
                    <li><a href="history">History</a></li>
                    % endif
                    % if title == "Graphs":
                        <li class="active"><a href="graphs">Graphs</a></li>
                    % else:
                        <li><a href="graphs">Graphs</a></li>
                    % endif
                    % if title == "Synced Items":
                        <li class="active"><a href="sync">Synced Items</a></li>
                    % else:
                        <li><a href="sync">Synced Items</a></li>
                    % endif
                    % if title == "Log":
                        <li class="active"><a href="logs">Logs</a></li>
                    % else:
                        <li><a href="logs">Logs</a></li>
                    % endif
                    % if title == "Settings":
                        <li class="active"><a href="settings">Settings</a></li>
                    % else:
                        <li><a href="settings">Settings</a></li>
                    % endif
                </ul>
            </div>
        </div>
    </nav>
</div>

${next.headerIncludes()}
<div class="body-container">
    ${next.body()}
</div>

<script src="interfaces/default/js/jquery-2.1.4.min.js"></script>
<script src="interfaces/default/js/bootstrap3/bootstrap.min.js"></script>
<script src="interfaces/default/js/script.js"></script>
<script>
    $('#updateDismiss').click(function() {
        $('#updatebar').slideUp('slow');
        // Set cookie to remember dismiss decision for 1 hour.
        setCookie('updateDismiss', 'true', 1/24);
    });

    if (!getCookie('updateDismiss')) {
        $('#updatebar').show();
    }
</script>
<script>
    $('#search_form').submit(function (e) {
        if ($('#query').hasClass('active') && $('#query').val().trim() != '') {
            $.ajax({
                type: 'post',
                url: 'search',
                data: { 'query': $('#query').val() }
            })
        } else {
            e.preventDefault();
            $('#search_button').removeClass('btn-inactive');
            $('#query').clearQueue().val('').animate({ right: '0', width: '200px' }).addClass('active').focus();
        }
    })
    $('#query').on('blur', function (e) {
        if ($(this).val().trim() == '') {
            $(this).delay(200).animate({ right: '-200px', width: '0' }, function () {
                $('#search_button').addClass('btn-inactive');
            }).removeClass('active');
        }
    });
</script>
${next.javascriptIncludes()}
</body>
</html>

<%def name="javascriptIncludes()"></%def>
<%def name="headIncludes()"></%def>
<%def name="headerIncludes()"></%def>
